<html>
<head>
<meta charset="UTF-8">
<title>Fake Shop Simulator Ultimate</title>
<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#111;
    color:#eee;
    height:100vh;
    display:flex;
    flex-direction:column;
}

header{
    background:#1f1f1f;
    padding:15px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 2px 10px rgba(0,0,0,0.6);
    flex-wrap:wrap;
    flex:0 0 auto;
}

#money, #job{
    font-size:20px;
    font-weight:bold;
}

button{
    background:#2e7d32;
    border:none;
    color:white;
    padding:6px 12px;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
    margin-left:5px;
    transition: 0.2s;
}

button:hover{
    background:#43a047;
}

main{
    display:flex;
    flex:1 1 auto;
    height: calc(100vh - 80px);
}

#products{
    flex:3;
    padding:20px;
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap:18px;
    overflow-y:auto;
    scroll-snap-type: y mandatory;  /* snap per row vertically */
    scroll-behavior: smooth;
    align-items:start;
}

#products .row{
    display: contents;  /* keeps grid layout but allows snapping per row */
    scroll-snap-align: start;  /* snap each row to top */
}

.product{
    background:#1b1b1b;
    border-radius:12px;
    padding:15px;
    box-shadow:0 0 12px rgba(0,0,0,0.6);
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    transition:0.2s;
    height:auto;
}

.product:hover{
    transform: scale(1.03);
}

.product h3{
    margin-top:0;
}

.price{
    color:#81c784;
    font-weight:bold;
    margin-bottom:8px;
}

#cart{
    flex:1;
    background:#181818;
    padding:20px;
    border-left:2px solid #333;
    display:flex;
    flex-direction:column;
    height:100%;
}

#cartItems{
    flex:1;
    overflow-y:auto;
    display:flex;
    flex-direction:column;
    gap:6px;
}

.cartItem{
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#222;
    padding:6px;
    border-radius:6px;
    flex:0 0 auto;
}

.cartItem span:first-child{
    flex:0 0 auto;
    white-space: nowrap;
}

.cartItem span:last-child{
    flex:0 0 auto;
    display:flex;
    gap:5px;
}

#arrestScreen, #policeScreen{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.95);
    display:none;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    font-size:40px;
    color:red;
    z-index:999;
}

#policeScreen div{
    font-size:20px;
    margin-top:15px;
}

.alert{
    position:fixed;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    background:#222;
    color:#fff;
    padding:10px 20px;
    border-radius:10px;
    box-shadow:0 0 10px black;
    z-index:1000;
    opacity:0;
    transition:0.5s;
}
</style>
</head>

<body>

<header>
<div>
<div id="money">Money: €0</div>
<div id="job">Job: Unemployed (€0/sec)</div>
</div>
<div style="margin-top:5px;">
<button onclick="addMoney(50)">+ €50 Cheat</button>
<button onclick="checkout()">Checkout</button>
<button onclick="jobApply()">Get Job</button>
</div>
</header>

<main>
<div id="products"></div>

<div id="cart">
<h2>Cart</h2>
<div id="cartItems"></div>
<hr>
<div>Total: €<span id="cartTotal">0</span></div>
</div>
</main>

<div id="arrestScreen">
<div>YOU GOT ARRESTED</div>
<div style="font-size:20px;margin-top:20px;">You went below €0</div>
<button style="margin-top:25px" onclick="resetGame()">Restart Life</button>
</div>

<div id="policeScreen">
<div>Police are coming!</div>
<div id="policeTimer">Time left: 5</div>
<button style="margin-top:20px" onclick="hidePolice()">Hide</button>
</div>

<div id="alert" class="alert"></div>

<script>
let money = parseFloat(localStorage.getItem("money")) || 100;
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let job = JSON.parse(localStorage.getItem("job")) || {name:"Unemployed", salary:0};
let policeTime = 0;
let policeInterval;

const productList = [
    {name:"Milk", price:2},
    {name:"Bread", price:3},
    {name:"Gaming Mouse", price:60},
    {name:"Keyboard", price:80},
    {name:"Energy Drink", price:4},
    {name:"Chocolate", price:5},
    {name:"Headphones", price:120},
    {name:"Phone Charger", price:15},
    {name:"Pizza", price:9},
    {name:"Laptop", price:900},
    {name:"Water Bottle", price:2},
    {name:"Protein Bar", price:6}
];

function showAlert(msg){
    const a = document.getElementById("alert");
    a.innerText = msg;
    a.style.opacity=1;
    setTimeout(()=>{a.style.opacity=0},2000);
}

function renderProducts(){
    const container = document.getElementById("products");
    container.innerHTML="";
    productList.forEach((p,i)=>{
        container.innerHTML += `
        <div class="product">
            <h3>${p.name}</h3>
            <div class="price">€${p.price}</div>
            <div style="display:flex; gap:5px;">
                <button onclick="addToCart(${i})">Add to cart</button>
                <button onclick="stealItem(${i})">Steal</button>
            </div>
        </div>`;
    });
}

function addToCart(i){
    cart.push(productList[i]);
    saveCart();
    renderCart();
    showAlert("Added " + productList[i].name + " to cart!");
}

function stealItem(i){
    let chance = Math.random();
    if(chance < 0.6){ 
        cart.push(productList[i]);
        saveCart();
        renderCart();
        showAlert("You successfully stole " + productList[i].name + "!");
    } else {
        showAlert("Caught! Police coming!");
        startPolice();
    }
}

function renderCart(){
    let total = 0;
    const container = document.getElementById("cartItems");
    container.innerHTML="";
    cart.forEach((item, index)=>{
        total += item.price;
        container.innerHTML += `
        <div class="cartItem">
            <span>${item.name}</span>
            <span>
                €${item.price}
                <button onclick="removeCart(${index})">X</button>
            </span>
        </div>`;
    });
    document.getElementById("cartTotal").innerText = total;
}

function removeCart(i){
    let removed = cart.splice(i,1)[0];
    saveCart();
    renderCart();
    showAlert("Removed " + removed.name);
}

function checkout(){
    let total = cart.reduce((a,b)=>a+b.price,0);
    money -= total;
    cart=[];
    saveAll();
    renderCart();
    updateMoney();
    showAlert("Checked out €" + total.toFixed(2));
    checkArrest();
}

function addMoney(amount){
    money += amount;
    saveMoney();
    updateMoney();
    showAlert("Added €"+amount);
}

function updateMoney(){
    document.getElementById("money").innerText = "Money: €" + money.toFixed(2);
    document.getElementById("job").innerText = `Job: ${job.name} (€${job.salary}/sec)`;
}

function checkArrest(){
    if(money < 0){
        document.getElementById("arrestScreen").style.display="flex";
    }
}

function resetGame(){
    money = 100;
    cart = [];
    job = {name:"Unemployed", salary:0};
    saveAll();
    updateMoney();
    renderCart();
    document.getElementById("arrestScreen").style.display="none";
}

function saveMoney(){localStorage.setItem("money", money);}
function saveCart(){localStorage.setItem("cart", JSON.stringify(cart));}
function saveJob(){localStorage.setItem("job", JSON.stringify(job));}
function saveAll(){saveMoney(); saveCart(); saveJob();}

function startPolice(){
    policeTime = 5;
    document.getElementById("policeScreen").style.display="flex";
    document.getElementById("policeTimer").innerText = `Time left: ${policeTime}`;
    if(policeInterval) clearInterval(policeInterval);
    policeInterval = setInterval(()=>{
        policeTime--;
        document.getElementById("policeTimer").innerText = `Time left: ${policeTime}`;
        if(policeTime <= 0){
            clearInterval(policeInterval);
            showAlert("Police caught you! Fine €50!");
            money -= 50;
            updateMoney();
            document.getElementById("policeScreen").style.display="none";
            checkArrest();
        }
    },1000);
}

function hidePolice(){
    clearInterval(policeInterval);
    document.getElementById("policeScreen").style.display="none";
}

function jobApply(){
    const options = [
        {name:"Cashier", salary:5},
        {name:"Delivery", salary:10},
        {name:"Programmer", salary:20}
    ];
    let choice = prompt("Choose a job: 1=Cashier, 2=Delivery, 3=Programmer");
    if(choice>=1 && choice<=3){
        job = options[choice-1];
        saveJob();
        updateMoney();
        showAlert("Hired as " + job.name);
    } else {
        showAlert("Invalid choice");
    }
}

// Earn money over time from job
setInterval(()=>{
    money += job.salary;
    updateMoney();
    saveMoney();
},1000);

renderProducts();
renderCart();
updateMoney();
</script>

</body>
</html>
