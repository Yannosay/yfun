<!DOCTYPE html>
<html>
<head>
  <title>Snake Game</title>
  <meta charset="UTF-8">
  <style>
    html, body { height: 100%; margin: 0; }
    body {
      background: black;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: white;
      font-family: sans-serif;
    }
    canvas { border: 1px solid white; }
    .controls {
      display: grid;
      grid-template-columns: 50px 50px 50px;
      gap: 5px;
    }
    .controls button {
      width: 50px;
      height: 50px;
      font-size: 18px;
      background: #222;
      color: white;
      border: 1px solid white;
      cursor: pointer;
    }
    .controls button:active { background: #555; }
    .up { grid-column: 2 / 3; }
    .left { grid-column: 1 / 2; }
    .down { grid-column: 2 / 3; }
    .right { grid-column: 3 / 4; }
    #overlay {
      position: absolute;
      top:0; left:0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.9);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 20px;
    }
    #overlay button {
      padding: 10px 20px;
      font-size: 20px;
      cursor: pointer;
      background: #222;
      color: white;
      border: 1px solid white;
    }
  </style>
</head>
<body>
  <canvas width="400" height="400" id="game"></canvas>
  <div class="controls">
    <button class="up">↑</button>
    <button class="left">←</button>
    <button class="down">↓</button>
    <button class="right">→</button>
  </div>
  <div id="overlay">
    <h1>Snake Game</h1>
    <button id="startBtn">Start Game</button>
  </div>
  <div id="deaths">Deaths: 0</div>
  <script>
    var canvas = document.getElementById('game');
    var context = canvas.getContext('2d');
    var grid = 16, count = 0, speed = 6;
    var deaths = 0;
    var snake, apple;
    var gameRunning = false;

    function resetSnake() {
      snake = {x:160,y:160,dx:grid,dy:0,cells:[],maxCells:4};
      apple = {x:getRandomInt(0,25)*grid, y:getRandomInt(0,25)*grid};
    }

    function getRandomInt(min,max){return Math.floor(Math.random()*(max-min))+min;}

    function loop(){
      if(!gameRunning) return;
      requestAnimationFrame(loop);
      if(++count < speed) return;
      count=0;
      context.clearRect(0,0,canvas.width,canvas.height);

      snake.x += snake.dx;
      snake.y += snake.dy;

      if(snake.x < 0 || snake.x >= canvas.width || snake.y < 0 || snake.y >= canvas.height){
        deaths++;
        document.getElementById('deaths').innerText = 'Deaths: ' + deaths;
        resetSnake();
      }

      snake.cells.unshift({x:snake.x, y:snake.y});
      if(snake.cells.length>snake.maxCells) snake.cells.pop();

      context.fillStyle='red';
      context.fillRect(apple.x,apple.y,grid-1,grid-1);

      context.fillStyle='green';
      snake.cells.forEach(function(cell,index){
        context.fillRect(cell.x,cell.y,grid-1,grid-1);
        if(cell.x===apple.x && cell.y===apple.y){
          snake.maxCells++;
          apple.x=getRandomInt(0,25)*grid;
          apple.y=getRandomInt(0,25)*grid;
        }
        for(var i=index+1;i<snake.cells.length;i++){
          if(cell.x===snake.cells[i].x && cell.y===snake.cells[i].y){
            deaths++;
            document.getElementById('deaths').innerText = 'Deaths: ' + deaths;
            resetSnake();
          }
        }
      });
    }

    document.addEventListener('keydown',function(e){
      if(e.which===37 && snake.dx===0){snake.dx=-grid; snake.dy=0;}
      else if(e.which===38 && snake.dy===0){snake.dy=-grid; snake.dx=0;}
      else if(e.which===39 && snake.dx===0){snake.dx=grid; snake.dy=0;}
      else if(e.which===40 && snake.dy===0){snake.dy=grid; snake.dx=0;}
    });

    document.querySelector('.up').addEventListener('click',()=>{if(snake.dy===0){snake.dy=-grid; snake.dx=0;}});
    document.querySelector('.down').addEventListener('click',()=>{if(snake.dy===0){snake.dy=grid; snake.dx=0;}});
    document.querySelector('.left').addEventListener('click',()=>{if(snake.dx===0){snake.dx=-grid; snake.dy=0;}});
    document.querySelector('.right').addEventListener('click',()=>{if(snake.dx===0){snake.dx=grid; snake.dy=0;}});

    document.getElementById('startBtn').addEventListener('click', ()=>{
      resetSnake();
      gameRunning = true;
      document.getElementById('overlay').style.display = 'none';
      requestAnimationFrame(loop);
    });
  </script>
</body>
</html>
