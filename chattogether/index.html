<html>
<head>
<meta charset="UTF-8">
<title>Fun Anonymous Chat</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#121212;color:#eee;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;height:100vh}
#chatContainer{display:flex;flex-direction:column;width:100%;height:100vh}
#messages{flex:1;padding:10px;overflow-y:auto;display:flex;flex-direction:column;gap:6px}
.message{padding:10px 14px;border-radius:16px;max-width:70%;word-break:break-word;opacity:0;transform:translateY(20px);animation:fadeIn 0.3s forwards;font-size:14px}
@keyframes fadeIn{to{opacity:1;transform:translateY(0)}}
#inputContainer{display:flex;padding:10px;background:#1e1e1e;align-items:center;gap:10px;border-top:2px solid #333}
#nicknameInput{width:120px;padding:8px 12px;border-radius:12px;border:none;font-size:14px;background:#2a2a2a;color:#fff}
#msgInput{flex:1;padding:8px 12px;border-radius:12px;border:none;font-size:14px;background:#2a2a2a;color:#fff}
#sendBtn{padding:8px 14px;border:none;background:#3a7d44;color:#fff;border-radius:12px;cursor:pointer;transition:0.2s}
#sendBtn:hover{background:#52a05a}
#typingIndicator{font-size:12px;color:#999;margin-left:10px;align-self:center}
</style>
</head>
<body>
<div id="chatContainer">
    <div id="messages"></div>
    <div id="inputContainer">
        <input type="text" id="nicknameInput" placeholder="Nickname"/>
        <input type="text" id="msgInput" placeholder="Type a message..."/>
        <button id="sendBtn">Send</button>
        <span id="typingIndicator"></span>
    </div>
</div>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig={apiKey:"AIzaSyAIXlO32dXQaJSTJqnlLZ7ylapdfukuwCI",authDomain:"drawtogether-fe581.firebaseapp.com",databaseURL:"https://drawtogether-fe581-default-rtdb.firebaseio.com",projectId:"drawtogether-fe581",storageBucket:"drawtogether-fe581.firebasestorage.app",messagingSenderId:"388416050930",appId:"1:388416050930:web:8ec73cd38892010de5226b"};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();
const chatRef=db.ref("funChat");
const typingRef=db.ref("typing");
const bannedRef=db.ref("bannedUsers");
const userId="User"+Math.floor(Math.random()*10000);
let userColor="#"+Math.floor(Math.random()*16777215).toString(16);
let nickname="Anon";
const messagesDiv=document.getElementById("messages");
const msgInput=document.getElementById("msgInput");
const sendBtn=document.getElementById("sendBtn");
const nicknameInput=document.getElementById("nicknameInput");
const typingIndicator=document.getElementById("typingIndicator");
const badWords=["badword1","badword2","asshole"];
function containsBadWord(text){text=text.toLowerCase();return badWords.some(word=>text.includes(word))}
function sendMessage(){
let text=msgInput.value.trim();
if(!text) return;
bannedRef.child(userId).get().then(snap=>{
if(snap.exists()){msgInput.value="";return}
if(containsBadWord(text)){bannedRef.child(userId).set(true);msgInput.value="";return}
chatRef.push({user:userId,nickname,nicknameColor:userColor,text,time:Date.now()});
msgInput.value="";updateTyping(false);
});
}
let typingTimeout;
function updateTyping(isTyping){typingRef.child(userId).set(isTyping?nickname:null)}
msgInput.addEventListener("input",()=>{updateTyping(true);clearTimeout(typingTimeout);typingTimeout=setTimeout(()=>updateTyping(false),1500)});
sendBtn.onclick=sendMessage;
msgInput.addEventListener("keydown",e=>{if(e.key==="Enter")sendMessage()});
nicknameInput.addEventListener("change",()=>{nickname=nicknameInput.value.trim()||nickname});
chatRef.on("child_added",snap=>{const msg=snap.val();const div=document.createElement("div");div.className="message";div.style.background=msg.nicknameColor+"33";div.style.color=msg.nicknameColor;div.innerHTML=`<strong>${msg.nickname}:</strong> ${msg.text}`;messagesDiv.appendChild(div);messagesDiv.scrollTop=messagesDiv.scrollHeight});
typingRef.on("value",snap=>{const users=[];snap.forEach(c=>{if(c.val())users.push(c.val())});typingIndicator.innerText=users.length?`${users.join(", ")} typing...`:""});
setInterval(()=>{chatRef.remove();typingRef.remove();},1000*60*60);
</script>
</body>
</html>
